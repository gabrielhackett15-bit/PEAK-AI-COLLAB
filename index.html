<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trinity Arena v1.0</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background: #0f172a; color: #f8fafc; }
        .glass { background: rgba(30, 41, 59, 0.7); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.1); }
        .ai-card { border-left: 4px solid #3b82f6; }
        .debate-card { border-left: 4px solid #ef4444; }
    </style>
</head>
<body class="p-4 md:p-8">
    <div class="max-w-4xl mx-auto">
        <header class="mb-8 text-center">
            <h1 class="text-4xl font-bold text-blue-400">TRINITY ARENA</h1>
            <p class="text-slate-400">Neural Proxy v12 Orchestrator</p>
        </header>

        <div class="glass p-6 rounded-2xl mb-6 grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
                <label class="block mb-2 font-bold">Select Models</label>
                <select id="model1" class="w-full p-2 rounded bg-slate-800 border border-slate-700 mb-2">
                    <option value="meta-llama/llama-3.3-70b-instruct">Llama 3.3 70B (Logic)</option>
                    <option value="deepseek-ai/deepseek-v3">DeepSeek V3 (Efficiency)</option>
                    <option value="nvidia/llama-3.1-nemotron-70b-instruct">Nemotron 70B (Prose)</option>
                </select>
                <select id="model2" class="w-full p-2 rounded bg-slate-800 border border-slate-700">
                    <option value="deepseek-ai/deepseek-v3">DeepSeek V3 (Efficiency)</option>
                    <option value="meta-llama/llama-3.3-70b-instruct">Llama 3.3 70B (Logic)</option>
                    <option value="anthropic/claude-3.5-sonnet">Claude 3.5 Sonnet</option>
                </select>
            </div>
            <div>
                <label class="block mb-2 font-bold">Execution Mode</label>
                <div class="flex gap-2">
                    <button onclick="setMode('help')" id="btn-help" class="flex-1 p-2 rounded bg-blue-600 font-bold">Helping</button>
                    <button onclick="setMode('debate')" id="btn-debate" class="flex-1 p-2 rounded bg-slate-700 font-bold">Debate</button>
                </div>
            </div>
        </div>

        <div class="glass p-4 rounded-2xl mb-6">
            <textarea id="userInput" placeholder="Enter your prompt or debate topic..." class="w-full h-32 p-4 bg-transparent border-none focus:ring-0 text-lg resize-none"></textarea>
            <button onclick="runArena()" class="w-full mt-4 bg-blue-500 hover:bg-blue-400 p-3 rounded-xl font-bold transition">INITIATE SEQUENCE</button>
        </div>

        <div id="outputArea" class="space-y-4"></div>
    </div>

    <script>
        let currentMode = 'help';
        const workerUrl = "https://your-worker.workers.dev/v1/chat/completions"; // UPDATE THIS

        function setMode(mode) {
            currentMode = mode;
            document.getElementById('btn-help').className = mode === 'help' ? 'flex-1 p-2 rounded bg-blue-600 font-bold' : 'flex-1 p-2 rounded bg-slate-700 font-bold';
            document.getElementById('btn-debate').className = mode === 'debate' ? 'flex-1 p-2 rounded bg-red-600 font-bold' : 'flex-1 p-2 rounded bg-slate-700 font-bold';
        }

        async function askAI(model, prompt, system = "") {
            const res = await fetch(workerUrl, {
                method: "POST",
                headers: { "Content-Type": "application/json", "Authorization": "Bearer YOUR_KEY" },
                body: JSON.stringify({
                    model: model,
                    messages: [
                        { role: "system", content: system },
                        { role: "user", content: prompt }
                    ]
                })
            });
            const data = await res.json();
            return data.choices[0].message.content;
        }

        async function runArena() {
            const input = document.getElementById('userInput').value;
            const m1 = document.getElementById('model1').value;
            const m2 = document.getElementById('model2').value;
            const output = document.getElementById('outputArea');
            output.innerHTML = "<p class='text-center animate-pulse'>Computing Neural Pathways...</p>";

            if (currentMode === 'help') {
                const ans1 = await askAI(m1, input, "Provide a high-quality initial draft or solution.");
                renderCard(m1, ans1, "Initial Solution");
                
                const ans2 = await askAI(m2, `Review this solution and improve it: ${ans1}`, "You are an expert editor. Enhance the provided code/text.");
                renderCard(m2, ans2, "Collaborative Enhancement", "bg-green-900/20");
            } else {
                const ans1 = await askAI(m1, input, "Argue IN FAVOR of this topic or take a PRO-stance.");
                renderCard(m1, ans1, "Argument: PRO", "bg-blue-900/20");

                const ans2 = await askAI(m2, input, "Argue AGAINST this topic or take a CON-stance.");
                renderCard(m2, ans2, "Argument: CON", "bg-red-900/20");

                const judge = await askAI("meta-llama/llama-3.3-70b-instruct", `Debate Transcript:\nPro: ${ans1}\nCon: ${ans2}`, "You are a neutral Mafia judge. Decide who had the better logic.");
                renderCard("JUDGE (Llama 70B)", judge, "Verdict", "bg-purple-900/40");
            }
        }

        function renderCard(model, text, label, color = "bg-slate-800") {
            const div = document.createElement('div');
            div.className = `p-4 rounded-xl ${color} border border-white/10 shadow-xl`;
            div.innerHTML = `<h3 class="text-xs font-black uppercase tracking-widest text-blue-400 mb-2">${label} (${model})</h3><div class="whitespace-pre-wrap">${text}</div>`;
            document.getElementById('outputArea').appendChild(div);
        }
    </script>
</body>
</html>
